#!/bin/bash
# ───────────────────────────────────────────────
# Проверка доступности веб-ресурса (например, http://app.local:8080)
# ───────────────────────────────────────────────

# 1. Получить первый аргумент командной строки для проверки
URL=$1

# 2. Проверка, что аргумент передан
# Если не указан URL, вывести подсказку и завершить работу с кодом ошибки 1
if [ -z "$URL" ]; then
  echo "Ошибка: нужно указать адрес!"
  echo "Пример использования: ./check_url.sh http://app.local:8080"
  exit 1
fi

# 3. Выполнение запроса к указанному URL и сохранение кода ответа сервера в переменную STATUS_CODE
STATUS_CODE=$(curl -s -o /dev/null -w "%{http_code}" "$URL")

# 4. Проверка результата на статус код 200
if [ "$STATUS_CODE" -eq 200 ]; then
  echo "Сайт $URL доступен! (Код ответа: $STATUS_CODE)"
  exit 0
else
  echo "Сайт $URL недоступен! (Код ответа: $STATUS_CODE)"
  exit 1
fi
